---
slug: Netcat
title: Netcat的简单使用
authors: guolei
tags: [cybersecurity]
---

## 环境配置

- win 环境

最重要的是要先关闭电脑的病毒检测（下载时会阻止，即便下载完之后他也要把你给删了，并且在整个使用过程中不能够开启）

下载解压后需要修改系统变量，path 中添加一项，即解压后 net 所在的路径，之后便可在终端使用 nc 命令

- mac 环境

只需 `brew install netcat`

## 端口扫描

命令：`nc  -zv ip地址 端口`

### 主要的参数：

- `-l`：开启监听
- `-p`：指定端口
- `-t`：以 telnet 形式应答
- `-e`：程序重定向
- `-n`：以数字形式表示 ip
- `-v`：显示执行命令过程
- `-z`：不进行交互，直接显示结果
- `-u`：使用 UDP 协议传输
- `-w`：设置超时时间

## 聊天通信

命令：`nc -l 端口`

我的 win 此时出错：locallistenfuxored:INVAL

解决方法：`nc -l -p 端口`

此时另一个主机便可尝试连接它：`nc 前面的主机名 端口`

此时，便可进行聊天，你在一台主机上输入信息，另一台主机上便会同步显示。

## 传输文件

接收方和发送方谁先执行命令都一样，大同小异，主要是要注意后面的 `<` 与 `>` 代表方向

a发b收：a先发（a先执行）：

`nc -l a的端口 < a要发的文件名`

b执行：

`nc a的IP a的端口 >b要取的名可以随便改（内容是a发的内热）`

b先收（b先执行）：

`nc -l b的端口>b要取得名（可以随便取）`

a执行

`nc b的主机 b的端口<a要发的文件`

至于方向：主要看传输方向，箭头的方向代表传输方向，传输发送时要文件指向端口，接受时要从端口指向文件

！！！！最好是谁接收谁去监听（即先收后发，上面第二种）！！！！

## 传输目录

先在目标机器执行命令准备好接收

`nc -l 端口 | tar -zxvf -`

然后在源机器执行命令

`tar -zcvf - [文件夹] | nc [目标IP] 端口`

没用的话就只能打包目录，然后用上面的方式传输文件再解压。
(对于验证问题，可以用md5sum来验证文件是否传输完整)
##遇到的坑

另外要说的是，可能因为版本的问题传输完成后不会退出，依旧是之前的页面。此外，一般出问题就是因为防火墙的问题，要格外注意。